# API Contracts

This document defines how frontend and backend communicate.

The goal is to avoid mismatches, assumptions, and silent breaking changes.

---

## Source of Truth

Preferred:

- OpenAPI / Swagger generated by the backend

Fallback:

- This document for endpoints not yet formalized

Frontend and backend must follow the same contract.

---

## General Rules

- Do not share code directly between TypeScript and C#
- Share schemas, not implementations
- Breaking changes must be explicitly called out

---

## API Conventions

### URLs

- REST-style endpoints
- Plural nouns for collections
- Examples:
  - `GET /api/users`
  - `POST /api/tenants`
  - `GET /api/subscriptions/{id}`

### Requests

- JSON payloads
- Explicit request DTOs
- Validation happens server-side

### Responses

- JSON
- Consistent shape per endpoint
- Meaningful HTTP status codes

Example success:

```json
{
  "data": { ... }
}
```

---

## Endpoints

### Training Sessions

**Feature Flag:** `feature.trainingSessionManagement`

#### List Sessions

```
GET /api/training-sessions
```

Response:
```json
{
  "data": [
    {
      "id": "uuid",
      "scheduledAt": "2026-02-10T10:00:00Z",
      "durationMinutes": 60,
      "type": 0,
      "status": 0,
      "notes": "string | null",
      "createdAt": "2026-02-02T12:00:00Z",
      "updatedAt": "2026-02-02T12:00:00Z | null"
    }
  ]
}
```

#### Get Session

```
GET /api/training-sessions/{id}
```

Response: Same shape as list item, wrapped in `{ "data": ... }`

#### Create Session

```
POST /api/training-sessions
```

Request:
```json
{
  "scheduledAt": "2026-02-10T10:00:00Z",
  "durationMinutes": 60,
  "type": 0,
  "notes": "string | null"
}
```

Response: Created session wrapped in `{ "data": ... }`

#### Update Session

```
PUT /api/training-sessions/{id}
```

Request: Same shape as create

Response: Updated session wrapped in `{ "data": ... }`

#### Cancel Session

```
POST /api/training-sessions/{id}/cancel
```

Response: Updated session with status = 2 (Cancelled)

#### Complete Session

```
POST /api/training-sessions/{id}/complete
```

Response: Updated session with status = 1 (Completed)

### Enums

**SessionType:**
- `0` = Individual
- `1` = Group

**SessionStatus:**
- `0` = Scheduled
- `1` = Completed
- `2` = Cancelled
